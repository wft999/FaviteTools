<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record id="answer_form" model="ir.ui.view">
			<field name="name">answer.form</field>
			<field name="model">p2p.learning.answer</field>
			<field name="arch" type="xml">
				<form string="exercise">
					<sheet>
						<field name="description" nolabel="1" type="html"/>
					</sheet>
				</form>
			</field>
		</record>
		
		<record id="step_tree" model="ir.ui.view">
            <field name="name">p2p.learning.step.tree</field>
            <field name="model">p2p.learning.step</field>
            <field name="arch" type="xml">
                <tree string="Lessons" export_xlsx="0">
                    <field name="name" string="Name" class="font-weight-bold"/>
                    <field name="title"/>
                </tree>
            </field>
        </record>
        
		<record id="step_form" model="ir.ui.view">
			<field name="name">step.form</field>
			<field name="model">p2p.learning.step</field>
			<field name="arch" type="xml">
				<form string="step">
					<field name="status" invisible="1"/>
					<sheet>
						<widget  name="web_ribbon" title="passed" bg_color="bg-success" attrs="{'invisible': [('status', '!=', 'passed')]}" />

						<div class="oe_button_box" name="button_box" groups="base.group_user">
	                        <button  class="oe_stat_button" name="%(p2p.action_discuss)d" type="action" icon="fa-file-text-o">
								online teacher
	                        </button>
                    	</div>
						<div class="oe_title">
							<h1>
								<field name="name" />
							</h1>
						</div>
						<notebook>
							<page name="description" string="description">
								<field name="description" nolabel="1" type="html" />
								<button  class="btn btn-primary" name="action_document_view" type="object" icon="fa-file-text-o">
									listen Document
	                        	</button>
							</page>
							<page name="Exercise" string="Exercise">
								<field name="answer_ids" widget="one2many_list">
		                            <tree create="0" delete="0">
		                            	<field name="name" />
										<field name="mark" />
										<button string="Do" class="btn btn-primary" name="action_do_exercise" type="object"/>
		                            </tree>
	                        	</field>
							</page>
						</notebook>
						<div class="oe_chatter">
                        	<field name="message_follower_ids" widget="mail_followers"/>
                			<field name="message_ids" widget="mail_thread"/>
                			<field name="activity_ids" widget="mail_activity"/>
                    	</div>
					</sheet>
				</form>
			</field>
		</record>
		
		<record id="learning_form" model="ir.ui.view">
			<field name="name">learning.form</field>
			<field name="model">p2p.learning</field>
			<field name="arch" type="xml">
				<form string="learning">
					<sheet>
						<div class="oe_title">
							<h1>
								<field name="name" placeholder="course Name" />
							</h1>
						</div>
						<field name="step_ids">
                            <tree decoration-primary="status in ('learning','pending','exercising')" decoration-muted="status == 'Not learning'" decoration-success="status == 'passed'" decoration-danger="status=='failed'">
                            	<field name="sequence" widget="handle" />
                            	<field name="name" />
								<field name="title" />
								<field name="status" />
                            </tree>
                       	</field>
                       	
					</sheet>
				</form>
			</field>
		</record>

		<record model="ir.ui.view" id="learning_kanban">
			<field name="name">p2p.learning.kanban</field>
			<field name="model">p2p.learning</field>
			<field name="arch" type="xml">
				<kanban class="o_modules_kanban">
					<field name="displayed_image_id" />
					<field name="name" />
					<field name="active" />
					<field name="description" />
					<field name="attend_count" />
					<field name="lesson_count" />
					<field name="finished_count" />
					<templates>
						<t t-name="kanban-box">
							<div  t-attf-class="oe_kanban_card o_has_icon">
								<div class="float-left">
                                    <span class="o_value"><t t-esc="record.lesson_count.value"/></span>
                                    <span class="o_label">Lessons/</span>
                                    <span class="o_value"><t t-esc="record.attend_count.value"/></span>
                                    <span class="o_label">persons</span>
                                </div>
								<div class="float-right">
                                    <a type="object" name="action_finsidhed_view">
                                    	<div>
                                            <span class="o_value"><t t-esc="record.finished_count.value"/></span>
                                            <span class="o_label">Finished</span>
                                        </div>
                                    </a>
                                    <a type="object" name="start_learning">Learning</a>
                                    <a type="object" name="abort_learning">abort</a>
                                </div>
							</div>
						</t>
					</templates>
				</kanban>
			</field>
		</record>
		
		<record model="ir.actions.act_window" id="learning_action_window">
			<field name="name">my learning</field>
			<field name="res_model">p2p.learning</field>
			<field name="view_mode">kanban,form</field>
			<field name="domain">[('student_id', '=', uid)]</field>
		</record>
		
		<menuitem name="My course" id="p2p.menu_learning_kanban" parent="p2p.menu_course" action="p2p.learning_action_window"/>


	</data>
</odoo>